<mvc:View   xmlns="sap.m"
            xmlns:core="sap.ui.core"
            xmlns:table="sap.ui.table"
            xmlns:mvc="sap.ui.core.mvc"
            xmlns:form="sap.ui.layout.form"
            xmlns:layout="sap.ui.layout"
            xmlns:uxap="sap.uxap"
            xmlns:html="http://www.w3.org/1999/xhtml"
            controllerName="zalcsa.aprobacionnotas.controller.Detail">
    <App>
    <pages>
      <Page title="{i18n>appDescription}">
        <content>
          <MessagePage    id="idPage"
                  showHeader="false"
                  description="{i18n>msPage}"
                  visible="true">
          </MessagePage>
          <uxap:ObjectPageLayout  id="idPageLayout"
                      class="sapUiSmallMarginEnd"
                      flexEnabled="true"
                      isChildPage="true"
                      showFooter="true"
                      visible="false">
            <uxap:headerTitle>
              <uxap:ObjectPageDynamicHeaderTitle>
                <uxap:expandedHeading>
                  <Title  text="{Head>/Documento}" />
                </uxap:expandedHeading>
                <uxap:snappedHeading>
                  <Title  text="{Head>/Documento}" />
                </uxap:snappedHeading>
                <uxap:navigationActions>
                  <OverflowToolbarButton  icon="sap-icon://full-screen"
                              press=".handleFullScreen"
                              visible="{=${localModel>/visibleToolbarFullScreen} ? true : false}"
                              tooltip="{i18n>tltEnterFullScreenMode}"/>
                            <OverflowToolbarButton  icon="sap-icon://exit-full-screen"
                              press=".handleExitFullScreen"
                              visible="{=${localModel>/visibleToolbarFullScreen} ? false : true}"
                              tooltip="{i18n>tltExitFullScreenMode}"/>
                  <OverflowToolbarButton  icon="sap-icon://decline"
                              press=".handleClose"
                              tooltip="{i18n>btnClose}"/>
                </uxap:navigationActions>
              </uxap:ObjectPageDynamicHeaderTitle>
            </uxap:headerTitle>
            <uxap:headerContent>
              <FlexBox  wrap="Wrap">
                <VBox justifyContent="Center"
                    class="sapUiSmallMarginBeginEnd">
                  <Label  text="{i18n>clDocumento}"
                      labelFor="idText1"/>
                  <Text id="idText1"
                      text="{Head>/Documento}"/>
                </VBox>
                <VBox justifyContent="Center"
                    class="sapUiSmallMarginBeginEnd">
                  <Label  text="{i18n>clSociedad}"
                      labelFor="idText2"/>
                  <Text id="idText2"
                      text="{Head>/Sociedad}"/>
                </VBox>
                <VBox justifyContent="Center"
                    class="sapUiSmallMarginBeginEnd">
                  <Label  text="{i18n>clCodCliente}"
                      labelFor="idText3"/>
                  <Text id="idText3"
                      text="{Head>/CodigoCliente}"/>
                </VBox>
                <VBox justifyContent="Center"
                    class="sapUiSmallMarginBeginEnd">
                  <Label  text="{i18n>clCodMotivo}"
                      labelFor="idText4"/>
                  <Text id="idText4"
                      text="{Head>/CodigoMotivo}"/>
                </VBox>
                <VBox justifyContent="Center"
                    class="sapUiSmallMarginBeginEnd">
                  <Label  text="{i18n>clCodCanal}"
                      labelFor="idText5"/>
                  <Text id="idText5"
                      text="{Head>/CodigoCanal}"/>
                </VBox>
                <VBox justifyContent="Center"
                    class="sapUiSmallMarginBeginEnd">
                  <Label  text="{i18n>clCreadoPor}"
                      labelFor="idText6"/>
                  <Text id="idText6"
                      text="{Head>/CreadoPor}"/>
                </VBox>
              </FlexBox>
            </uxap:headerContent>

            <uxap:sections>

              <uxap:ObjectPageSection titleUppercase="false"
                          title="{i18n>objSection1}">
                <uxap:subSections>
                  <uxap:ObjectPageSubSection>
                    <uxap:blocks>
                      <VBox justifyContent="Center">
                        <Label  text="{i18n>clNombreCliente}"
                            labelFor="idText7"/>
                        <Text id="idText7"
                            text="{Head>/Cliente}"/>
                        <html:br />
                        <Label  text="{i18n>clMotivo}"
                            labelFor="idText8"/>
                        <Text id="idText8"
                            text="{Head>/Motivo}"/>
                        <html:br />
                      </VBox>
                      <VBox justifyContent="Center">
                        <Label  text="{i18n>clEstado}"
                            labelFor="idText9"/>
                        <Text id="idText9"
                            text="{Head>/Estado}"/>
                        <html:br />
                      </VBox>
                    </uxap:blocks>
                  </uxap:ObjectPageSubSection>
                </uxap:subSections>
              </uxap:ObjectPageSection>

              <uxap:ObjectPageSection titleUppercase="false"
                          title="{i18n>objSection2}">
                <uxap:subSections>
                  <uxap:ObjectPageSubSection>
                    <uxap:blocks>
                      <Table  id="idTable2"
                          mode="None"
                          inset="false"
                          growingThreshold="10"
                          width="auto"
                          items="{/selnotadetalleSet}">
                        <headerToolbar>
                          <OverflowToolbar>
                            <content>
                              <Title id="idTitle2" text="{i18n>lblDetalleCobranza} (0)" level="H2"/>
                              <ToolbarSpacer />
                            </content>
                          </OverflowToolbar>
                        </headerToolbar>

                        <columns>
                          <Column>
                            <Text   text="{i18n>clDocumento}"/>
                          </Column>
                          <Column>
                            <Text   text="{i18n>clSociedad}"/>
                          </Column>
                          <Column minScreenWidth="Tablet"
                              demandPopin="true">
                            <Text   text="{i18n>clValorNeto}"/>
                          </Column>  
                           <Column>
                            <Text   text="{i18n>clFacturaReferencia}"/>
                          </Column>
                        </columns>

                        <items>
                          <ColumnListItem type="Inactive">
                            <cells>
                              <Text text="{Documento}"/>
                              <Text text="{Sociedad}"/>
                              <Text text="{
                                      path:'ValorNeto',
                                      type:'sap.ui.model.type.Float',
                                      formatOptions:{
                                        groupingSeparator: ',',
                                        decimalSeparator : '.',
                                        decimals: 2
                                      }
                                    }"/>
                              <Text text="{FacturaReferencia}"/>
                            </cells>
                          </ColumnListItem>
                        </items>

                      </Table>

                    </uxap:blocks>
                  </uxap:ObjectPageSubSection>
                </uxap:subSections>
              </uxap:ObjectPageSection>

              <!-- Flujo de Aprobacion -->
              <uxap:ObjectPageSection titleUppercase="false"
                          title="{i18n>flujoAprobacion}">
                <uxap:subSections>
                  <uxap:ObjectPageSubSection>
                    <uxap:blocks>

                      <Table  id="Tableesquema"
                          sticky="ColumnHeaders,HeaderToolbar"
                          inset="false"
                          growing="true"
                          items="{
                            path: 'localModel>/flujoCollection',
                            sorter: {
                              path: 'paso'
                            }
                          }"
                          class="sapFDynamicPageAlignContent"
                          width="auto">
                        <columns>
                          <Column demandPopin="true">
                            <Text   text="{i18n>libCodigo}"/>
                          </Column>
                          <Column demandPopin="true">
                            <Text   text="{i18n>paso}"/>
                          </Column>
                          <Column demandPopin="true">
                            <Text   text="{i18n>usuario}"/>
                          </Column>
                        </columns>
                        <items>
                          <ColumnListItem vAlign="Middle">
                            <cells>
                              <ObjectIdentifier text="{localModel>lib_codigo}"/>
                              <HBox >
                                <core:Icon src="sap-icon://arrow-right" visible="{= ${localModel>paso} === ${localModel>/detalle/Paso}}" class="sapUiSmallMarginEnd" ></core:Icon>
                                <Label text="{localModel>paso}" />
                              </HBox>
                              <ObjectIdentifier text="{localModel>usuario}"/>
                            </cells>
                          </ColumnListItem>
                        </items>
                      </Table>

                    </uxap:blocks>
                  </uxap:ObjectPageSubSection>
                </uxap:subSections>
              </uxap:ObjectPageSection>

              <!-- Log Aprobación de Documento -->
              <uxap:ObjectPageSection titleUppercase="false"
                          title="{i18n>logAprobacionDocto}">
                <uxap:subSections>
                  <uxap:ObjectPageSubSection>
                    <uxap:blocks>

                      <Table  id="Tablelog"
                          sticky="ColumnHeaders,HeaderToolbar"
                          inset="false"
                          growing="true"
                          items="{
                            path: 'localModel>/logCollection',
                            sorter: {
                              path: 'paso'
                            }
                          }"
                          class="sapFDynamicPageAlignContent"
                          width="auto">
                        <columns>
                          <Column demandPopin="true">
                            <Text   text="{i18n>usuario}"/>
                          </Column>
                          <Column demandPopin="true">
                            <Text   text="{i18n>paso}"/>
                          </Column>
                          <Column demandPopin="true">
                            <Text   text="{i18n>proceso}"/>
                          </Column>
                          <Column demandPopin="true">
                            <Text   text="{i18n>fecha}"/>
                          </Column>
                          <Column demandPopin="true">
                            <Text   text="{i18n>comentario}"/>
                          </Column>   
                        </columns>
                        <items>
                          <ColumnListItem vAlign="Middle">
                            <cells>
                              <ObjectIdentifier text="{localModel>usuario}"/>
                              <ObjectIdentifier text="{localModel>paso}"/>
                              <ObjectIdentifier text="{localModel>proceso}"/>
                              <ObjectIdentifier text="{
                                                  path:'localModel>fechadocto',
                                                  type:'sap.ui.model.type.Date',
                                                  formatOptions:{
                                                    pattern: 'dd.MM.yyyy',
                                                    UTC: true
                                                  }
                                                }"/>
                              <ObjectIdentifier text="{localModel>comentario}"/>
                            </cells>
                          </ColumnListItem>
                        </items>
                      </Table>

                    </uxap:blocks>
                  </uxap:ObjectPageSubSection>
                </uxap:subSections>
              </uxap:ObjectPageSection>

            </uxap:sections>

            <uxap:footer>
              <OverflowToolbar>
                <Button id="idButton1"
                    icon="sap-icon://message-popup"
                    type="Emphasized"
                    text="1"
                    visible="false"
                    press=".handleMessagePopoverPress"/>
                <ToolbarSpacer/>
                <Button type="Accept"
                    text="{i18n>btnApprove}"
                    press=".onAccept"/>
                <Button type="Reject"
                    text="{i18n>btnReject}"
                    press=".onReject"/>
              </OverflowToolbar>
            </uxap:footer>
          </uxap:ObjectPageLayout>
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>